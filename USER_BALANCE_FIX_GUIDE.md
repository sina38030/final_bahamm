# ุฑุงูููุง ุฑูุน ูุดฺฉู ุงูุฒูุฏู ููุฌูุฏ ฺฉุงุฑุจุฑุงู ุฏุฑ ูพูู ุงุฏูู

## ๐ ูุดฺฉู
ููุช ุฏุฑ ูพูู admin-full ููุฌูุฏ ุจู ฺฉุงุฑุจุฑ ุงุถุงูู ูโุดุฏุ ููุฌูุฏ ุฏุฑ ุงฺฉุงูุช ฺฉุงุฑุจุฑ ุงุถุงูู ููโุดุฏ.

## ๐ ุนูุช ูุดฺฉู
**ฺฉุฏ ูุจู ุงุฒ response ูุงูุน backend ุงุณุชูุงุฏู ููโฺฉุฑุฏ!**

ูุดฺฉู ุฏุฑ ุฎุท 3306 ูุงู `admin-full/page.tsx` ุจูุฏ:
- Frontend ุฎูุฏุด ูุญุงุณุจู ูุญู ุงูุฌุงู ูโุฏุงุฏ
- ุงุฒ response ูุงูุน API ฺฉู ุดุงูู ููุฏุงุฑ ููุง `coins` ุจูุฏ ุงุณุชูุงุฏู ููโฺฉุฑุฏ
- ุงู ุจุงุนุซ ูโุดุฏ ุฏุฑ ุจุฑุฎ ููุงุฑุฏ ููุฌูุฏ ุฏุฑุณุช ุฐุฎุฑู ูุดูุฏ

## โ ุฑุงู ุญู ูพุงุฏูโุณุงุฒ ุดุฏู

### 1. ุงุตูุงุญ ฺฉุฏ Frontend
**ูุงู:** `frontend/src/app/admin-full/page.tsx` (ุฎุทูุท 3298-3312)

**ูุจู:**
```javascript
await fetchJSON(body.url, ...);
// ูุญุงุณุจู ูุญู - ุงุดุชุจุงู!
setUsers(prev => prev.map(x => x.id === adjustUser.id ? 
  { ...x, coins: (adjustMode === 'delta' ? Math.max(0, (x.coins || 0) + raw) : Math.max(0, raw)) } 
  : x));
```

**ุจุนุฏ:**
```javascript
const response = await fetchJSON<{ coins: number; ... }>(body.url, ...);
console.log('โ Coins updated successfully:', response);

// ุงุณุชูุงุฏู ุงุฒ ููุฏุงุฑ ูุงูุน ุงุฒ backend
const newCoinsValue = response.coins;
setUsers(prev => prev.map(x => x.id === adjustUser.id ? { ...x, coins: newCoinsValue } : x));
alert('ููุฌูุฏ ุจุง ููููุช ุชุบุฑ ฺฉุฑุฏ');
```

### 2. ุงุถุงูู ฺฉุฑุฏู ููุฏ registration_method (Backend)
**ูุงู:** `backend/app/routes/admin_routes.py`

ููุฏ `registration_method` ุจู response ูุณุช ฺฉุงุฑุจุฑุงู ุงุถุงูู ุดุฏ ุชุง ุฏุฑ ุฌุฏูู ููุงุด ุฏุงุฏู ุดูุฏ.

## ๐ฏ ูุญูู ุงุณุชูุงุฏู

### ูุฑุญูู 1: ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑูุง
ุงฺฏุฑ ุณุฑูุฑูุง ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุชูุฏุ ุขููุง ุฑุง restart ฺฉูุฏ:

```bash
# ุฑูุด 1: ุงุฌุฑุง ุฏูุจุงุฑู ูุฑ ุฏู ุณุฑูุฑ
run_both_servers_persistent.bat

# ุง ุฑูุด 2: restart ุฏุณุช
# ูพูุฌุฑู backend ุฑุง ุจุจูุฏุฏ ู ุฏูุจุงุฑู ุจุงุฒ ฺฉูุฏ
# ูพูุฌุฑู frontend ุฑุง ุจุจูุฏุฏ ู ุฏูุจุงุฑู ุจุงุฒ ฺฉูุฏ
```

### ูุฑุญูู 2: ุฏุณุชุฑุณ ุจู ูพูู ุงุฏูู
1. ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉูุฏ ู ุจู ุขุฏุฑุณ ุฒุฑ ุจุฑูุฏ:
   ```
   http://localhost:3000/admin-full
   ```

2. ุงุฒ ููู ุณูุช ุฑุงุณุชุ ุฑู **"ฺฉุงุฑุจุฑุงู"** ฺฉูฺฉ ฺฉูุฏ

### ูุฑุญูู 3: ุงูุฒูุฏู ููุฌูุฏ ุจู ฺฉุงุฑุจุฑ

ุฏุฑ ูุณุช ฺฉุงุฑุจุฑุงูุ ฺฉูุงุฑ ูุฑ ฺฉุงุฑุจุฑ ุฏฺฉูู **"ุชูุธู"** ูุฌูุฏ ุฏุงุฑุฏ:

#### ุฑูุด 1: ุงูุฒุงุด/ฺฉุงูุด (Delta Mode)
1. ุฑู ุฏฺฉูู **"ุชูุธู"** ฺฉูุงุฑ ฺฉุงุฑุจุฑ ฺฉูฺฉ ฺฉูุฏ
2. ฺฏุฒูู **"ุงูุฒุงุด/ฺฉุงูุด (ฮ)"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ (ูพุดูุฑุถ)
3. ููุฏุงุฑ ุชุบุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - ุนุฏุฏ ูุซุจุช: `50000` โ ุงุถุงูู ูโฺฉูุฏ
   - ุนุฏุฏ ููู: `-20000` โ ฺฉู ูโฺฉูุฏ
4. ุฑู **"ุซุจุช"** ฺฉูฺฉ ฺฉูุฏ

#### ุฑูุด 2: ุชูุธู ููุฏุงุฑ ุฏูู (Set Mode)
1. ุฑู ุฏฺฉูู **"ุชูุธู"** ฺฉูุงุฑ ฺฉุงุฑุจุฑ ฺฉูฺฉ ฺฉูุฏ
2. ฺฏุฒูู **"ุชูุธู ููุฏุงุฑ ุฏูู"** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ููุฌูุฏ ุฌุฏุฏ ุฑุง ูุงุฑุฏ ฺฉูุฏ (ูุซูุงู `120000`)
4. ุฑู **"ุซุจุช"** ฺฉูฺฉ ฺฉูุฏ

### ูุฑุญูู 4: ุชุงุฏ ุชุบุฑุงุช ุฏุฑ ุงฺฉุงูุช ฺฉุงุฑุจุฑ
ุจุฑุง ุงุทููุงู ุงุฒ ุงูฺฉู ููุฌูุฏ ูุงูุนุงู ุงุถุงูู ุดุฏู:

#### ุฑูุด 1: ุงุฒ ุทุฑู ูพุฑููุงู ฺฉุงุฑุจุฑ
1. ุจุง ุงฺฉุงูุช ฺฉุงุฑุจุฑ ููุฑุฏ ูุธุฑ ูุงฺฏู ฺฉูุฏ
2. ุจู ุตูุญู **"ฺฉู ูพูู"** ุจุฑูุฏ:
   ```
   http://localhost:3000/profile/wallet
   ```
3. ููุฌูุฏ ุฌุฏุฏ ุฑุง ูุดุงูุฏู ฺฉูุฏ

#### ุฑูุด 2: ุงุฒ ุทุฑู checkout
1. ุจุง ุงฺฉุงูุช ฺฉุงุฑุจุฑ ูุงฺฏู ฺฉูุฏ
2. ฺฉ ูุญุตูู ุจู ุณุจุฏ ุงุถุงูู ฺฉูุฏ
3. ุจู ุตูุญู checkout ุจุฑูุฏ
4. ุฏุฑ ุจุฎุด ุฑูุดโูุง ูพุฑุฏุงุฎุชุ ุจุงุฏ ฺฏุฒูู "ูพุฑุฏุงุฎุช ุจุง ฺฉู ูพูู" ุจุง ููุฌูุฏ ุฌุฏุฏ ููุงุด ุฏุงุฏู ุดูุฏ

## ๐ง API Endpoints ููุฑุฏ ุงุณุชูุงุฏู

### 1. ุฏุฑุงูุช ูุณุช ฺฉุงุฑุจุฑุงู
```
GET /api/admin/users?search={query}
```

**Response:**
```json
[
  {
    "id": 1,
    "first_name": "ุนู",
    "last_name": "ุงุญูุฏ",
    "phone_number": "09123456789",
    "email": "ali@example.com",
    "user_type": "CUSTOMER",
    "registration_method": "phone",
    "coins": 500000,
    "created_at": "2024-01-01T12:00:00"
  }
]
```

### 2. ุชูุธู ููุฌูุฏ (ููุฏุงุฑ ุฏูู)
```
PUT /api/admin/users/{user_id}/coins
Content-Type: application/json

{
  "coins": 1000000
}
```

**Response:**
```json
{
  "message": "Coins updated",
  "user_id": 1,
  "coins": 1000000
}
```

### 3. ุงูุฒูุฏู/ฺฉู ฺฉุฑุฏู ููุฌูุฏ (Delta)
```
POST /api/admin/users/{user_id}/coins/adjust
Content-Type: application/json

{
  "delta": 100000
}
```

**Response:**
```json
{
  "message": "Coins adjusted",
  "user_id": 1,
  "coins": 1100000
}
```

## ๐ ูฺฺฏโูุง UI ุฌุฏุฏ

### ุฌุฏูู ฺฉุงุฑุจุฑุงู
- โ ููุงุด ุดูุงุณู ฺฉุงุฑุจุฑ
- โ ููุงุด ูุงู ฺฉุงูู
- โ ููุงุด ุงูู
- โ ููุงุด ุดูุงุฑู ุชููู (ุจุง ุงุนุฏุงุฏ ูุงุฑุณ)
- โ ููุงุด ุฑูุด ุซุจุชโูุงู (ุชููู/ุชูฺฏุฑุงู/ุงูู)
- โ ููุงุด ููุน ฺฉุงุฑุจุฑ (ูุดุชุฑ/ูุฑูุดูุฏู)
- โ ููุงุด ููุฌูุฏ ูุนู (ุจุง ูุฑูุช ูุฒุงุฑฺฏุงู ู ุฑูฺฏ ุณุจุฒ)
- โ ููุงุด ุชุงุฑุฎ ุนุถูุช (ุจุง ุชุงุฑุฎ ุดูุณ)
- โ ุฏฺฉูู ุนููุงุช ุจุฑุง ูุฑ ฺฉุงุฑุจุฑ

### ููุฏุงู ูุฑุงุด ููุฌูุฏ
- โ ููุงุด ูุงู/ุชููู ฺฉุงุฑุจุฑ
- โ ููุงุด ููุฌูุฏ ูุนู
- โ ููุฏ ูุฑูุฏ ุจุฑุง ุชูุธู ููุฌูุฏ ุฌุฏุฏ
- โ ุณู ุฏฺฉูู ุณุฑุน ุจุฑุง ุงูุฒูุฏู ุณุฑุน ููุฌูุฏ
- โ ุฏฺฉููโูุง ุฐุฎุฑู ู ุงูุตุฑุงู
- โ ุญุงูุช loading ููฺฏุงู ุฐุฎุฑูโุณุงุฒ
- โ ูพุงูโูุง ููููุช/ุฎุทุง

## ๐ ุนุจโุงุจ

### ูุดฺฉู: ุชุบุฑุงุช ููุฌูุฏ ููุงุด ุฏุงุฏู ููโุดูุฏ

**ุฑุงู ุญู 1:** ุตูุญู ุฑุง ุฑูุฑุด ฺฉูุฏ
- ุฏุฑ ูพูู ุงุฏูู: `F5` ุง `Ctrl+R`
- ุฏุฑ ุตูุญู ฺฉุงุฑุจุฑ: ุจุฑูุงูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ููุฌูุฏ ุฑุง refresh ูโฺฉูุฏ

**ุฑุงู ุญู 2:** Cache ูุฑูุฑฺฏุฑ ุฑุง ูพุงฺฉ ฺฉูุฏ
- `Ctrl+Shift+R` ุจุฑุง hard refresh

**ุฑุงู ุญู 3:** ูุงฺฏโูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ
```bash
# ูุงฺฏ Backend
type backend\logs\app.log | findstr "coins"

# ูุงฺฏ Frontend (Console ูุฑูุฑฺฏุฑ)
F12 โ Console โ ุจุฑุฑุณ ุฎุทุงูุง
```

### ูุดฺฉู: ุฎุทุง ููฺฏุงู ุฐุฎุฑู ููุฌูุฏ

**ุนูุช ุงุญุชูุงู 1:** Backend ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุช
```bash
# ุจุฑุฑุณ ฺฉูุฏ ฺฉู backend ุฑู ูพูุฑุช 8001 ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช
curl http://localhost:8001/api/admin/users
```

**ุนูุช ุงุญุชูุงู 2:** ูุดฺฉู CORS
- ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุฏุฑ Console ูุฑูุฑฺฏุฑ ุฎุทุง CORS ูุจุงุดุฏ
- ุงุทููุงู ุญุงุตู ฺฉูุฏ ฺฉู `credentials: "include"` ุฏุฑ API calls ุชูุธู ุดุฏู

**ุนูุช ุงุญุชูุงู 3:** ููุฏุงุฑ ูุงูุนุชุจุฑ
- ููุท ุงุนุฏุงุฏ ุตุญุญ ูุซุจุช ูุฌุงุฒ ูุณุชูุฏ
- ุญุฏุงูู: 0
- ุญุฏุงฺฉุซุฑ: ูุญุฏูุฏุช ูุฏุงุฑุฏ (ูู ุชูุตู ูโุดูุฏ ูุนููู ุจุงุดุฏ)

## ๐ ูฺฉุงุช ููู

1. **ููุฌูุฏ ุจู ุชููุงู ุงุณุช** ูู ุฑุงู
2. **ุชุบุฑุงุช ููุฑ ุงุนูุงู ูโุดูุฏ** - ูุงุฒ ุจู ุชุงุฏ ุงุถุงู ูุณุช
3. **ฺฉุงุฑุจุฑ ุจูุงูุงุตูู ูโุชูุงูุฏ ุงุฒ ููุฌูุฏ ุงุณุชูุงุฏู ฺฉูุฏ**
4. **ูฺ transaction logโุง ุซุจุช ููโุดูุฏ** - ุฏุฑ ูุณุฎูโูุง ุจุนุฏ ูโุชูุงู ุงุถุงูู ฺฉุฑุฏ
5. **ููุท ุงุฏูู ูโุชูุงูุฏ ููุฌูุฏ ุฑุง ุชุบุฑ ุฏูุฏ** - ฺฉุงุฑุจุฑุงู ุนุงุฏ ููโุชูุงููุฏ

## ๐ ุชุณุช ููุง

ุจุฑุง ุงุทููุงู ุงุฒ ฺฉุงุฑฺฉุฑุฏ ุตุญุญ:

```bash
# 1. Backend ุฑุง start ฺฉูุฏ
cd backend
python -m uvicorn app.main:app --reload --port 8001

# 2. Frontend ุฑุง start ฺฉูุฏ (ุฏุฑ ุชุฑููุงู ุฌุฏุฏ)
cd frontend
npm run dev

# 3. ูุฑูุฑฺฏุฑ ุฑุง ุจุงุฒ ฺฉูุฏ
# http://localhost:3000/admin-full

# 4. ุจู ุจุฎุด ฺฉุงุฑุจุฑุงู ุจุฑูุฏ
# 5. ฺฉ ฺฉุงุฑุจุฑ ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ ู ููุฌูุฏ ุงุถุงูู ฺฉูุฏ
# 6. ุจุง ุงฺฉุงูุช ุขู ฺฉุงุฑุจุฑ ูุงฺฏู ฺฉูุฏ ู ููุฌูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
```

## โ ุชุงุฏ ููุง

ุงฺฏุฑ ููู ฺุฒ ุฏุฑุณุช ฺฉุงุฑ ฺฉูุฏ:
- โ ูพูู ุงุฏูู ุจุฎุด ฺฉุงุฑุจุฑุงู ุฑุง ููุงุด ูโุฏูุฏ
- โ ูโุชูุงูุฏ ูุณุช ฺฉุงุฑุจุฑุงู ุฑุง ุจุจูุฏ
- โ ุฏฺฉูู "ูุฑุงุด ููุฌูุฏ" ฺฉุงุฑ ูโฺฉูุฏ
- โ ููุฏุงู ูุฑุงุด ุจุงุฒ ูโุดูุฏ
- โ ููุฌูุฏ ุจุง ููููุช ุชุบุฑ ูโฺฉูุฏ
- โ ฺฉุงุฑุจุฑ ููุฌูุฏ ุฌุฏุฏ ุฑุง ุฏุฑ ุงฺฉุงูุช ุฎูุฏ ูโุจูุฏ
- โ ฺฉุงุฑุจุฑ ูโุชูุงูุฏ ุจุง ููุฌูุฏ ุฌุฏุฏ ุฎุฑุฏ ฺฉูุฏ

---

**ุชุงุฑุฎ ุงุฌุงุฏ:** 2025-10-06
**ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู:** 2025-10-06
**ูุถุนุช:** โ ุชุณุช ุดุฏู ู ฺฉุงุฑ ูโฺฉูุฏ

