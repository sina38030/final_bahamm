<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø§ØªØµØ§Ù„ Ù„ÙˆÚ©Ø§Ù„ Ù‡Ø§Ø³Øª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .status {
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-size: 16px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .loading {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        pre {
            background: white;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin: 5px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            background: #007bff;
            color: white;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ Ù„ÙˆÚ©Ø§Ù„</h1>
    
    <div class="info">
        <strong>Ø±Ø§Ù‡Ù†Ù…Ø§:</strong> Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±Ù‡Ø§ÛŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ùˆ Ø¨Ú©â€ŒØ§Ù†Ø¯ Ø§Ø³Øª.
    </div>

    <button onclick="testFrontend()">ØªØ³Øª ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ (3000)</button>
    <button onclick="testBackend()">ØªØ³Øª Ø¨Ú©â€ŒØ§Ù†Ø¯ (8001)</button>
    <button onclick="testProducts()">ØªØ³Øª API Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
    <button onclick="testAll()">ØªØ³Øª Ù‡Ù…Ù‡</button>

    <div id="results"></div>

    <script>
        const resultsDiv = document.getElementById('results');

        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            resultsDiv.appendChild(div);
        }

        function clearResults() {
            resultsDiv.innerHTML = '';
        }

        async function testFrontend() {
            clearResults();
            addResult('â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯...', 'loading');
            
            try {
                const response = await fetch('http://localhost:3000');
                if (response.ok) {
                    const text = await response.text();
                    addResult(`âœ… ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª (Ù¾ÙˆØ±Øª 3000)<br>ÙˆØ¶Ø¹ÛŒØª: ${response.status}<br>Ø·ÙˆÙ„ Ù…Ø­ØªÙˆØ§: ${text.length} Ú©Ø§Ø±Ø§Ú©ØªØ±`, 'success');
                } else {
                    addResult(`âš ï¸ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯ Ø§Ù…Ø§ Ø¨Ø§ Ø®Ø·Ø§: ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯:<br>${error.message}`, 'error');
            }
        }

        async function testBackend() {
            clearResults();
            addResult('â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª Ø¨Ú©â€ŒØ§Ù†Ø¯...', 'loading');
            
            try {
                const response = await fetch('http://localhost:8001/api');
                if (response.ok) {
                    const data = await response.json();
                    addResult(`âœ… Ø¨Ú©â€ŒØ§Ù†Ø¯ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø§Ø³Øª (Ù¾ÙˆØ±Øª 8001)<br>Ù¾ÛŒØ§Ù…: ${data.message}`, 'success');
                } else {
                    addResult(`âš ï¸ Ø¨Ú©â€ŒØ§Ù†Ø¯ Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯ Ø§Ù…Ø§ Ø¨Ø§ Ø®Ø·Ø§: ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¨Ú©â€ŒØ§Ù†Ø¯:<br>${error.message}`, 'error');
            }
        }

        async function testProducts() {
            clearResults();
            addResult('â³ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª API Ù…Ø­ØµÙˆÙ„Ø§Øª...', 'loading');
            
            try {
                const response = await fetch('http://localhost:8001/api/admin/products?limit=3');
                if (response.ok) {
                    const products = await response.json();
                    addResult(`âœ… API Ù…Ø­ØµÙˆÙ„Ø§Øª Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ø¯<br>ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­ØµÙˆÙ„Ø§Øª: ${products.length}`, 'success');
                    if (products.length > 0) {
                        const pre = document.createElement('pre');
                        pre.textContent = JSON.stringify(products[0], null, 2);
                        resultsDiv.appendChild(pre);
                    }
                } else {
                    addResult(`âš ï¸ API Ù…Ø­ØµÙˆÙ„Ø§Øª Ù¾Ø§Ø³Ø® Ø¯Ø§Ø¯ Ø§Ù…Ø§ Ø¨Ø§ Ø®Ø·Ø§: ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ API Ù…Ø­ØµÙˆÙ„Ø§Øª:<br>${error.message}`, 'error');
            }
        }

        async function testAll() {
            clearResults();
            addResult('â³ Ø´Ø±ÙˆØ¹ ØªØ³Øª Ù‡Ù…Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§...', 'loading');
            
            // Test Frontend
            try {
                const response = await fetch('http://localhost:3000');
                if (response.ok) {
                    addResult('âœ… ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯: Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§', 'success');
                } else {
                    addResult(`âš ï¸ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯: Ø®Ø·Ø§ ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ ÙØ±Ø§Ù†Øªâ€ŒØ§Ù†Ø¯: ${error.message}`, 'error');
            }

            // Test Backend
            try {
                const response = await fetch('http://localhost:8001/api');
                if (response.ok) {
                    const data = await response.json();
                    addResult(`âœ… Ø¨Ú©â€ŒØ§Ù†Ø¯: ${data.message}`, 'success');
                } else {
                    addResult(`âš ï¸ Ø¨Ú©â€ŒØ§Ù†Ø¯: Ø®Ø·Ø§ ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ Ø¨Ú©â€ŒØ§Ù†Ø¯: ${error.message}`, 'error');
            }

            // Test Products API
            try {
                const response = await fetch('http://localhost:8001/api/admin/products?limit=3');
                if (response.ok) {
                    const products = await response.json();
                    addResult(`âœ… API Ù…Ø­ØµÙˆÙ„Ø§Øª: ${products.length} Ù…Ø­ØµÙˆÙ„ ÛŒØ§ÙØª Ø´Ø¯`, 'success');
                } else {
                    addResult(`âš ï¸ API Ù…Ø­ØµÙˆÙ„Ø§Øª: Ø®Ø·Ø§ ${response.status}`, 'error');
                }
            } catch (error) {
                addResult(`âŒ API Ù…Ø­ØµÙˆÙ„Ø§Øª: ${error.message}`, 'error');
            }

            addResult('âœ… ØªØ³Øªâ€ŒÙ‡Ø§ ØªÙ…Ø§Ù… Ø´Ø¯!', 'info');
        }

        // Auto-run test on load
        window.onload = () => {
            setTimeout(testAll, 500);
        };
    </script>
</body>
</html>


















